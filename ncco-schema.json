{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "NCCO Schema",

  "definitions": {
    "ncco": {
      "oneOf": [
        { "$ref": "#/definitions/ncco-connect" },
        { "$ref": "#/definitions/ncco-conversation" },
        { "$ref": "#/definitions/ncco-input" },
        { "$ref": "#/definitions/ncco-record" },
        { "$ref": "#/definitions/ncco-stream" },
        { "$ref": "#/definitions/ncco-talk" }
      ]
    },
    "ncco-base": {
      "required": ["action"]
    },
    "ncco-connect": {
      "allOf": [
        { "$ref": "#/definitions/ncco-base" },
        {
          "properties": {
            "action": { "enum": ["connect"] }
          }
        }
      ]
    },
    "ncco-conversation": {
      "allOf": [
        { "$ref": "#/definitions/ncco-base" },
        {
          "properties": {
            "action": { "enum": ["conversation"] }
          }
        }
      ]
    },
    "ncco-input": {
      "allOf": [
        { "$ref": "#/definitions/ncco-base" },
        {
          "properties": {
            "action": { "enum": ["input"] }
          }
        }
      ]
    },
    "ncco-record": {
      "allOf": [
        { "$ref": "#/definitions/ncco-base" },
        {
          "properties": {
            "action": { "enum": ["record"] },
            "format": { "enum": ["mp3", "wav"] },
            "endOnSilence": {
              "type": "integer",
              "minimum": 3,
              "maximum": 10
            },
            "endOnKey": {
              "type": "string",
              "pattern": "^[0-9#\\*]$"
            },
            "timeOut": {
              "type": "integer",
              "minimum": 3,
              "maximum": 7200
            },
            "beepStart": {
              "type": "boolean"
            },
            "eventUrl": {
              "type": "string"
            },
            "eventMethod": {
              "type": "string",
              "enum": ["POST", "GET"]
            }
          }
        }
      ]
    },
    "ncco-stream": {
      "allOf": [
        { "$ref": "#/definitions/ncco-base" },
        {
          "properties": {
            "action": { "enum": ["stream"] }
          }
        }
      ]
    },
    "ncco-talk": {
      "allOf": [
        { "$ref": "#/definitions/ncco-base" },
        {
          "properties": {
            "action": { "enum": ["talk"] },
            "text": {
              "type": "string",
              "maxLength": 1500
            },
            "bargeIn": {
              "type": "boolean"
            },
            "loop": {
              "type": "integer",
              "minimum": 0
            },
            "voiceName": {
              "$ref": "#/definitions/voices"
            }
          },
          "required": ["text"]
        }
      ]
    },
    "voices": {
      "enum": [
        "Agnieszka",
        "Amy",
        "Astrid",
        "Brian",
        "Carla",
        "Carmen",
        "Celine",
        "Chantal",
        "Chipmunk",
        "Conchita",
        "Cristiano",
        "Dora",
        "Emma",
        "Enrique",
        "Eric",
        "Ewa",
        "Filiz",
        "Geraint",
        "Giorgio",
        "Gwyneth",
        "Hans",
        "Ines",
        "Ivy",
        "Jacek",
        "Jan",
        "Jennifer",
        "Joey",
        "Justin",
        "Karl",
        "Kendra",
        "Kimberly",
        "Liv",
        "Lotte",
        "Mads",
        "Maja",
        "Marlene",
        "Mathieu",
        "Maxim",
        "Miguel",
        "Naja",
        "Nicole",
        "Penelope",
        "Raveena",
        "Ricardo",
        "Ruben",
        "Russell",
        "Salli",
        "Tatyana",
        "Vitoria"
      ]
    }
  },

  "type": "array",
  "items": {
    "$ref": "#/definitions/ncco"
  },
  "minItems": 1
}
